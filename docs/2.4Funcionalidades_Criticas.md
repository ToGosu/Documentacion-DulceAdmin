## 2.4 Funcionalidades críticas

Las siguientes funcionalidades se consideran **críticas** para el sistema **DulceAdmin**, ya que impactan directamente la operación diaria del negocio (panadería), la continuidad del servicio y la correcta administración del inventario.  
Cada funcionalidad se relaciona con uno o varios **drivers de arquitectura**que han guiado el diseño de la solución.

---

### 2.4.1 Hacer una venta

**Descripción**  
Esta funcionalidad permite registrar una venta realizada a un cliente, seleccionando productos desde el inventario, calculando el total (incluyendo impuestos o descuentos, si aplica) y generando el recibo correspondiente.  
Es el flujo principal del sistema, ya que representa el momento en el que el negocio genera ingreso.

**Por qué es crítica**  
- Sin esta funcionalidad, el sistema no cumple su propósito principal: **apoyar el proceso de facturación y registro de ventas**.  
- Afecta directamente la **continuidad del negocio** y la **trazabilidad de las transacciones**.  
- Se relaciona con el control de inventario, la generación de reportes y la contabilidad.

**Drivers de arquitectura asociados (drivers de calidad)**  
- **Disponibilidad:**  
  - La venta debe poder registrarse incluso en escenarios de falla parcial (por ejemplo, sin conexión a Internet, trabajando en modo local).  
  - Se relaciona con escenarios del tipo: funcionamiento en red local y disponibilidad en horario laboral.
- **Rendimiento / Eficiencia:**  
  - El tiempo de respuesta debe ser corto para no afectar la atención al cliente (creación rápida de facturas).  
- **Capacidad:**  
  - Debe soportar múltiples ventas concurrentes (varias mesas o clientes al tiempo).  
- **Integridad de datos:**  
  - No se debe perder información de la venta ni quedar en estados inconsistentes.
- **Seguridad:**  
  - Solo usuarios autorizados (cajero/administrador) pueden registrar ventas.

**Componentes / drivers técnicos que soportan esta funcionalidad**  
- **Frontend:** interfaz de “Hacer una venta”, selección de productos y confirmación.  
- **Casos de uso de venta:**  
  - Validan la información, orquestan el flujo y aplican reglas de negocio.  
- **Dominios de Recibo e Inventario:**  
  - Representan la venta, la línea de productos y el impacto en el inventario.  
- **Repositorios y entidades:**  
  - Persisten la información de la venta y actualizan el stock.  
- **Base de datos:**  
  - Almacena ventas, productos, recibos y clientes.  

Estos elementos actúan como **drivers de implementación** de la funcionalidad crítica “Hacer una venta”, asegurando que se cumplan los atributos de calidad definidos.

---

### 2.4.2 Añadir inventario de un producto

**Descripción**  
Esta funcionalidad permite **incrementar la cantidad disponible** de un producto en el inventario, ya sea por compra de insumos, producción interna o actualización de existencias.  
Incluye la selección del producto, la cantidad a añadir y la persistencia del nuevo stock en el sistema.

**Por qué es crítica**  
- Un inventario desactualizado provoca errores en la venta (productos sin stock, ventas imposibles, reportes erróneos).  
- Es clave para asegurar la **disponibilidad real de productos** y evitar rupturas de stock.  
- Afecta la confiabilidad de reportes y decisiones del negocio (qué producir, qué comprar, qué ofrecer).

**Drivers de arquitectura asociados**  
- **Capacidad:**  
  - El sistema debe ser capaz de manejar múltiples actualizaciones de inventario sin degradar el rendimiento.  
- **Consistencia / Integridad de datos:**  
  - Los cambios deben ser transaccionales: o se actualiza el inventario correctamente, o no se aplica el cambio.  
- **Disponibilidad:**  
  - La actualización debe estar disponible durante el horario laboral para que el administrador o encargado pueda ajustar el stock.  
- **Trazabilidad:**  
  - Es deseable poder rastrear quién y cuándo modificó el inventario.

**Componentes / drivers técnicos que soportan esta funcionalidad**  
- **Interfaz de administración:**  
  - Pantalla para buscar producto y modificar su cantidad en inventario.  
- **Controlador de inventario:**  
  - Endpoint para actualizar las existencias de un producto.  
- **Caso de uso de actualización de inventario:**  
  - Aplica reglas (por ejemplo, no permitir valores negativos) y coordina la operación.  
- **Dominio de Inventario y Producto:**  
  - Modelan el stock, cantidad mínima y máxima, etc.  
- **Repositorios de inventario y producto:**  
  - Permiten grabar los cambios en la base de datos.  
- **Base de datos:**  
  - Gestionan las transacciones y la persistencia de datos.

Estos componentes constituyen el **driver técnico** que garantiza que la funcionalidad crítica de “añadir inventario de un producto” sea confiable, consistente y alineada con los requisitos del negocio.

---

### 2.4.3 Notificar cuando un producto esté bajo de inventario

**Descripción**  
Esta funcionalidad permite **detectar y notificar** cuando la cantidad de un producto desciende por debajo de un umbral mínimo configurado (stock mínimo).  
La notificación puede mostrarse en la interfaz, enviarse por alerta visual o incluso por mecanismo externo (correo/notification gateway, si se implementa).

**Por qué es crítica**  
- Evita que la panadería se quede sin productos clave en horas de alta demanda.  
- Permite tomar decisiones rápidas (reposición, producción, cambios de menú).  
- Está directamente relacionada con la **continuidad operativa** y la **satisfacción del cliente**.

**Drivers de arquitectura asociados**  
- **Disponibilidad:**  
  - El sistema debe ser capaz de detectar en tiempo oportuno que un producto está bajo de inventario.  
- **Capacidad / Rendimiento:**  
  - La verificación de stock no debe afectar el rendimiento general del sistema (se puede hacer al momento de vender o en procesos periódicos).  
- **Usabilidad:**  
  - La notificación debe ser clara y visible para el usuario (no debe pasar desapercibida).  
- **Mantenibilidad:**  
  - El umbral mínimo debe ser configurable sin modificar código (parámetros o configuración).

**Componentes / drivers técnicos que soportan esta funcionalidad**  
- **Dominio de Inventario / Producto:**  
  - Mantienen la cantidad actual y el stock mínimo definido.  
- **Casos de uso relacionados con venta e inventario:**  
  - Durante la venta o al actualizar inventario, verifican si el stock quedó por debajo del mínimo.  
- **Controladores:**  
  - Devuelven mensajes o flags al frontend indicando que el producto está bajo de inventario.  
- **Frontend:**  
  - Muestra alertas visuales.  
-  **Notification Gateway:**  
  - Enviar notificaciones push o correos a administradores cuando se detectan productos en nivel crítico.

Estos elementos actúan como **drivers de la funcionalidad crítica** de notificación de bajo inventario, vinculando requisitos de disponibilidad, usabilidad y capacidad con componentes concretos del sistema.


[Ir al anterior](2.3.5Rendimiento.md).

[ir al inicio](/README.md).

[3. Tacticas y estrategias](3.Tacticas_y_Estrategias.md).