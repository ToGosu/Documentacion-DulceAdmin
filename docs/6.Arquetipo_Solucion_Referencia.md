## 5. Arquetipo de Solución / Referencia

El **arquetipo de solución** representa un modelo conceptual o plantilla arquitectónica que define la **estructura general y las relaciones entre los componentes del sistema** desde un punto de vista agnóstico a las tecnologías.  
Es decir, describe **cómo se organiza la solución a nivel de capas, responsabilidades y comunicación**, sin depender de frameworks o herramientas específicas.  
Su propósito es **guiar el diseño y evolución del sistema** de manera coherente, asegurando que todos los componentes cumplan con principios de mantenibilidad, escalabilidad y reutilización.

El arquetipo de solución de **DulceAdmin** se basa en los principios de **Clean Architecture** y **arquitectura en capas**, promoviendo el bajo acoplamiento y la alta cohesión.  
A continuación, se presentan los componentes principales que conforman este arquetipo, junto con su intención y motivación:

| Componente | Intención / Motivación | Uso / Adopción |
|-------------|------------------------|----------------|
| **Capa de Presentación (Interfaces de Usuario)** | Facilitar la interacción del usuario con el sistema a través de una interfaz gráfica clara y responsiva. | Permite a los trabajadores y administradores registrar ventas, consultar inventario y generar reportes. |
| **Capa de Aplicación (Casos de uso)** | Contener la lógica que coordina las operaciones del negocio sin depender de frameworks ni bases de datos. | Define los flujos de trabajo (registrar venta, generar recibo, actualizar inventario). |
| **Capa de Dominio (Entidades de Negocio)** | Representar las reglas de negocio puras y modelos fundamentales del sistema. | Incluye entidades como *Producto*, *Recibo*, *Trabajador*, *Cliente* y sus relaciones. |
| **Capa de Infraestructura (Adaptadores y Persistencia)** | Encapsular la comunicación con recursos externos como bases de datos o APIs. | Contiene los repositorios, mapeos y controladores de acceso a PostgreSQL. |
| **Capa de Cross-Cutting (Servicios Transversales)** | Manejar aspectos comunes como validaciones, excepciones, logs y seguridad. | Proporciona soporte transversal sin afectar la lógica central. |
| **Bus de Comunicación / Dependencia Invertida** | Facilitar la conexión entre capas mediante interfaces y principios de inyección de dependencias. | Permite que las capas superiores dependan de abstracciones, no de implementaciones concretas. |

### Bloques de construccion 

| **Componente** | **Tecnología / Fabricante** | **Justificación técnica** |
|----------------|-----------------------------|----------------------------|
| **Backend** | **Java 21 (OpenJDK) + Spring Boot 3.5.6** | Java es un lenguaje robusto, multiplataforma y con soporte empresarial a largo plazo. Spring Boot facilita la creación de APIs REST seguras, escalables y modulares, aplicando principios de *Clean Architecture* y *SOLID*. Permite inyección de dependencias, manejo transaccional, integración con PostgreSQL y testing automatizado. |
| **Frontend** | **Vue.js 3 (Open Source)** | Vue.js ofrece un enfoque progresivo, fácil de mantener y con excelente rendimiento para construir interfaces reactivas tipo SPA. Su ecosistema (Vue Router, Pinia/Vuex) facilita la organización del código y la comunicación con APIs REST. Además, tiene una comunidad sólida y gran compatibilidad con servicios Auth0 y PaaS modernos. |
| **Database** | **PostgreSQL 16.x** | PostgreSQL es un motor de base de datos relacional open source, estable y altamente confiable. Ofrece integridad transaccional (ACID), soporte para UUIDs y funciones avanzadas de indexación, ideales para manejar inventarios, usuarios y transacciones de venta. Tiene integración nativa con Spring Data. |
| **API Gateway** | **Kong Gateway OSS** | Kong es un gateway open source que permite centralizar el enrutamiento, autenticación, control de tráfico y monitoreo de APIs. Ayuda a aplicar políticas de seguridad y balanceo sin acoplarse al backend. Su integración con Auth0 y WAF fortalece la capa de seguridad y disponibilidad. |
| **WAF (Web Application Firewall)** | **Cloudflare WAF** | Cloudflare protege la aplicación contra ataques comunes (SQL Injection, XSS, DDoS). Es gratuito para proyectos pequeños y fácil de integrar con Render. Mejora la disponibilidad, la seguridad y la resiliencia de la solución ante tráfico malicioso. |
| **Identify Management** | **Auth0 (OpenID Connect)** | Auth0 permite autenticar y autorizar usuarios de manera centralizada mediante OAuth2 y JWT. Facilita la gestión de roles (admin, mesero, contador) sin implementar seguridad desde cero. Cumple con estándares de seguridad, mejora la interoperabilidad y reduce riesgos de acceso indebido. |
| **Payment Gateway** | **Stripe API** | Stripe simplifica las transacciones seguras sin necesidad de almacenar datos sensibles. Cumple con certificación PCI-DSS, ofrece SDKs listos para integración con Java y JavaScript, y cobra solo por uso, optimizando costos para la panadería. |
| **Notification Gateway** | **Firebase Cloud Messaging (Google)** | Firebase facilita el envío de notificaciones push o por correo a los usuarios (ej. inventario bajo o ventas exitosas). Es gratuito, escalable y con integración directa a aplicaciones web (Vue.js) y backend Java mediante SDKs oficiales. |
| **Blob Storage** | **Cloudflare R2** | Almacenamiento de objetos económico y escalable, ideal para facturas, imágenes y archivos adjuntos. Ofrece redundancia global y cero costo por salida (egress-free). Reduce la carga sobre la base de datos y mejora la eficiencia en consultas. |
| **Instrumentation / Traceability** | **Grafana + Prometheus** | Este conjunto permite el monitoreo en tiempo real, métricas de rendimiento, logs y trazabilidad de errores. Grafana ofrece paneles visuales y Prometheus recolección de métricas. Su uso garantiza observabilidad y capacidad de diagnóstico en entornos productivos. |
| **PaaS** | **Render Web Services** | Render ofrece un entorno PaaS gratuito y simplificado que permite desplegar aplicaciones Java y Node.js directamente desde GitHub. Facilita CI/CD, soporte HTTPS, logs, autoscaling básico y administración unificada de servicios. Ideal para un despliegue ágil y educativo. |
| **Message Catalog (opcional)** | **Apache Kafka** | Kafka permite la comunicación asíncrona entre microservicios y el manejo de eventos del sistema (por ejemplo, notificaciones de inventario o facturación). Aunque opcional en esta versión, su adopción futura facilitaría la escalabilidad e integración con otros módulos. |


El arquetipo establece la estructura base sobre la que se construye **DulceAdmin**, asegurando una separación clara entre las reglas del negocio y los mecanismos técnicos que las soportan.

![Arquetipo de Solución – DulceAdmin](img/ArquetipoReferencia.png)

---

[ir al inicio](/README.md).

[Ir al anterior](5.Arquitectura_Referencia_Solucion.md).

[7. Linea base](7.LineaBase.md).