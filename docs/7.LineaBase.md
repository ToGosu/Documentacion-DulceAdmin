## 7. Línea Base Arquitectónica

La **línea base arquitectónica** define el conjunto de decisiones, componentes y configuraciones fundamentales que servirán como punto de partida estable para el desarrollo, despliegue y mantenimiento del sistema **DulceAdmin**.  
Su propósito es establecer una **referencia técnica y estructural** sobre la cual se realizan futuras iteraciones, integraciones o mejoras, asegurando coherencia entre el diseño, la implementación y los objetivos de negocio.

La línea base incluye tanto **componentes desarrollados internamente (core)** como **componentes adoptados (genéricos o de soporte)**, todos ellos integrados bajo principios de **Clean Architecture**, **bajo acoplamiento** y **alta cohesión**.

---

## 7.1 Línea Base Arquitectónica de Componentes

A continuación, se detalla la línea base arquitectónica correspondiente a cada uno de los componentes principales del sistema **DulceAdmin**, describiendo su intención, motivación y justificación de uso dentro de la solución.

---

### 7.1.1 Componente: Backend DulceAdmin

**Tipo:** Desarrollo propio  
**Tecnologías:** Java 21 (OpenJDK), Spring Boot 3.x  
**Fabricante:** OpenJDK / Spring Framework  
**Versión:** 3.x  
**Protocolo de Comunicación:** HTTPS / REST  
**Tipo de Bloque:** Core  

#### Descripción
El **Backend de DulceAdmin** constituye el núcleo de la solución. Es responsable de procesar peticiones, aplicar reglas de negocio, validar operaciones, gestionar transacciones, orquestar el acceso a la base de datos y coordinar la comunicación con servicios externos como pasarelas de pago o módulos de notificación.

#### Intención y Motivación
- Centralizar la lógica de negocio y asegurar la separación entre la capa de presentación (frontend) y la persistencia (base de datos).  
- Facilitar la evolución y mantenibilidad del sistema mediante una estructura modular y desacoplada.  
- Garantizar el cumplimiento de principios **SOLID**, **DIP** y **Clean Code** en todo el desarrollo.  

#### Justificación
El uso de **Spring Boot** en combinación con **Java 21** permite construir aplicaciones escalables, seguras y fácilmente testeables.  
Spring proporciona un robusto ecosistema de dependencias (Spring Data, Spring Security, Spring Web) que agiliza la integración con bases de datos, APIs y mecanismos de seguridad.  
Al ser una tecnología **open source**, garantiza independencia de proveedor y soporte a largo plazo.

#### Elementos Arquitectónicos
| Elemento | Rol / Responsabilidad | Justificación |
|-----------|-----------------------|----------------|
| **Controladores REST** | Exponen los servicios del sistema a través de endpoints HTTP. | Permiten la comunicación estandarizada entre el frontend y el backend. |
| **Servicios de Negocio (Use Cases)** | Implementan la lógica funcional del dominio. | Encapsulan reglas de negocio, facilitando pruebas unitarias y mantenibilidad. |
| **Repositorios (Spring Data JPA)** | Administran la persistencia de datos con PostgreSQL. | Simplifican el acceso a la base de datos sin depender de SQL explícito. |
| **Manejador de Excepciones** | Controla errores y genera respuestas consistentes. | Mejora la trazabilidad y experiencia del usuario ante fallos. |
| **Configuraciones y Beans** | Gestionan la inyección de dependencias. | Promueven el desacoplamiento entre módulos y la escalabilidad. |

---

### 7.1.2 Componente: Frontend DulceAdmin

**Tipo:** Desarrollo propio  
**Tecnologías:** Vue.js 3.x  
**Fabricante:** Open Source Community  
**Protocolo de Comunicación:** HTTPS / REST  
**Tipo de Bloque:** Core  

#### Descripción
El **Frontend de DulceAdmin** es la interfaz de usuario del sistema. Facilita la interacción entre los trabajadores, administradores y las funciones del negocio mediante una interfaz web dinámica, intuitiva y adaptable a distintos dispositivos.

#### Intención y Motivación
- Proveer una experiencia de usuario fluida y reactiva.  
- Reducir errores de operación a través de flujos claros de registro, consulta y facturación.  
- Desacoplar la presentación visual del backend, permitiendo su despliegue independiente.  

#### Justificación
El framework **Vue.js** se eligió por su simplicidad, curva de aprendizaje corta y potencia para construir aplicaciones SPA (Single Page Applications).  
Ofrece un sistema reactivo eficiente, manejo avanzado del DOM y un ecosistema sólido con **Vue Router** (ruteo) y **Vuex / Pinia** (gestión de estado).  
Su naturaleza modular permite un desarrollo incremental y fácil mantenimiento.

#### Elementos Arquitectónicos
| Elemento | Rol / Responsabilidad | Justificación |
|-----------|-----------------------|----------------|
| **Componentes Vue** | Representan la vista y lógica de interfaz. | Facilitan la reutilización de elementos y un diseño modular. |
| **Ruteo (Vue Router)** | Controla la navegación interna del sistema. | Permite flujos de navegación sin recarga de página. |
| **Gestor de Estado (Pinia / Vuex)** | Administra el estado global de la aplicación. | Evita inconsistencias entre vistas y mejora la sincronización con el backend. |
| **Servicios API (Axios)** | Conectan el frontend con el backend. | Gestionan peticiones HTTPS seguras y asincrónicas. |
| **Gestión de Sesiones y Roles** | Controla accesos según el tipo de usuario. | Implementa seguridad a nivel de interfaz mediante roles y permisos. |

---

### 7.1.3 Componente: Base de Datos DulceAdmin

**Tipo:** Componente adoptado  
**Tecnología:** PostgreSQL 16.x  
**Fabricante:** PostgreSQL Global Development Group  
**Protocolo de Comunicación:** JDBC / SQL / TCP  
**Tipo de Bloque:** Soporte  

#### Descripción
El **subsistema de base de datos** es responsable de almacenar y gestionar toda la información crítica del sistema: productos, ventas, usuarios, roles, recibos, inventario y reportes.

#### Intención y Motivación
- Proveer almacenamiento persistente, confiable y transaccional.  
- Garantizar integridad y consistencia de datos en todas las operaciones.  
- Permitir escalabilidad y respaldo ante fallos o pérdida de información.  

#### Justificación
**PostgreSQL** es una base de datos relacional avanzada, open source y altamente confiable.  
Su compatibilidad con **Spring Data JPA** y su capacidad para manejar grandes volúmenes de datos hacen de ella una opción óptima para proyectos empresariales.  
Además, su soporte para **transacciones ACID**, replicación y consultas complejas asegura la integridad de los datos del negocio.

#### Elementos Arquitectónicos
| Elemento | Rol / Responsabilidad | Justificación |
|-----------|-----------------------|----------------|
| **Esquemas y Tablas** | Estructuran la información del dominio. | Mantienen orden lógico en el almacenamiento de datos. |
| **Procedimientos y Vistas** | Ejecutan operaciones predefinidas y consultas optimizadas. | Mejoran la eficiencia en consultas frecuentes. |
| **Índices y Claves Foráneas** | Aceleran búsquedas y garantizan relaciones de integridad. | Optimización del rendimiento y consistencia referencial. |
| **Conexiones Seguras (SSL)** | Protegen las transacciones de red. | Refuerzan la seguridad del sistema en entornos distribuidos. |

---

### 7.1.4 Componente: Servicios Transversales y de Integración

**Tipo:** Componentes adoptados  
**Incluye:** API Gateway, WAF, Notification Gateway, Payment Gateway, Traceabilidad, PaaS, Blob Storage.  

#### Descripción
Conjunto de servicios adoptados que proporcionan funcionalidades transversales de comunicación, seguridad, observabilidad y despliegue.  
Estos componentes no pertenecen directamente a la lógica del negocio, pero son esenciales para garantizar el rendimiento, la seguridad y la escalabilidad del sistema.

#### Intención y Motivación
- Asegurar la integración fluida entre los módulos internos y los servicios externos.  
- Facilitar despliegues automatizados, monitoreo constante y gestión segura del tráfico.  
- Delegar responsabilidades especializadas a herramientas confiables y probadas.  

#### Ejemplos Destacados
| Componente | Proveedor | Rol / Función | Justificación |
|-------------|------------|----------------|----------------|
| **Auth0** | Auth0 Inc. | Gestión de identidad y autenticación. | Administra usuarios y roles con estándares de seguridad (OpenID, JWT). |
| **Kong Gateway OSS** | Kong | Enrutamiento y control de APIs. | Centraliza peticiones, aplica políticas de seguridad y monitoreo. |
| **Firebase Cloud** | Google | Envío de notificaciones. | Permite comunicación eficiente con usuarios sin sobrecargar el backend. |
| **Cloudflare WAF / R2** | Cloudflare | Seguridad y almacenamiento de archivos. | Protege contra ataques y aloja recursos estáticos con alta disponibilidad. |
| **Stripe API** | Stripe | Procesamiento de pagos. | Garantiza transacciones seguras y conformes a PCI-DSS. |
| **Grafana + Prometheus** | Grafana Labs | Monitoreo y trazabilidad. | Ofrece métricas de rendimiento, alertas y logs centralizados. |

---

## 7.2 Estilos y Patrones Arquitectónicos Adoptados

Los **estilos y patrones arquitectónicos** definen las formas organizativas y las soluciones recurrentes utilizadas en el diseño del sistema **DulceAdmin**.  
Estos proporcionan un marco conceptual que guía la estructura del software, la interacción entre sus componentes y la forma en que se manejan los cambios y la evolución del sistema.  

Su adopción permite alcanzar los **atributos de calidad** establecidos (mantenibilidad, escalabilidad, disponibilidad y rendimiento) mediante decisiones consistentes y fundamentadas.  
En *DulceAdmin*, los estilos arquitectónicos adoptados buscan **equilibrar la simplicidad de implementación local con la posibilidad de migración futura hacia entornos distribuidos o en la nube.**

---

### 7.2.1 Estilo Arquitectónico 1

#### 7.2.1.1 Nombre  
**Arquitectura por Capas (Layered Architecture)**

#### 7.2.1.2 Problema  
En sistemas empresariales, la falta de separación clara entre la lógica de presentación, negocio y persistencia conduce a un código difícil de mantener, probar y escalar.  
Cuando las responsabilidades no están bien definidas, cualquier cambio en la base de datos o la interfaz puede impactar de manera negativa en todo el sistema, generando acoplamiento fuerte y errores colaterales.

#### 7.2.1.3 Solución / Motivación  
La **arquitectura por capas** organiza el sistema en niveles horizontales con responsabilidades bien delimitadas:
- **Capa de Presentación (Frontend):** gestiona la interacción con el usuario.  
- **Capa de Aplicación / Negocio (Backend):** coordina reglas de negocio, validaciones y flujo de procesos.  
- **Capa de Persistencia (Base de Datos):** gestiona el almacenamiento y acceso a datos.  

Esta separación favorece el **bajo acoplamiento** y la **alta cohesión**, lo que permite modificar una capa sin afectar las demás.  
En *DulceAdmin*, esta arquitectura facilita la evolución del sistema, la reutilización del código y el despliegue modular (frontend y backend independientes).

---

### 7.2.2 Estilo Arquitectónico 2

#### 7.2.2.1 Nombre  
**Clean Architecture (Arquitectura Limpia)**

#### 7.2.2.2 Problema  
Las dependencias directas entre las capas de un sistema dificultan la prueba, el mantenimiento y la integración con nuevos frameworks o tecnologías.  
Además, cuando las reglas de negocio dependen de los detalles de infraestructura, se compromete la estabilidad y la capacidad de evolución de la solución.

#### 7.2.2.3 Solución / Motivación  
La **Clean Architecture** propone un modelo donde las dependencias siempre apuntan hacia el núcleo del sistema (reglas de negocio), y no hacia el exterior.  
Se basa en el **Principio de Inversión de Dependencias (DIP)** y el **aislamiento de capas**:
- Las **entidades de dominio** no dependen de frameworks ni de bases de datos.  
- Los **casos de uso** son independientes de la infraestructura.  
- Los **adaptadores** traducen las solicitudes externas hacia las capas internas y viceversa.  

Esto permite reemplazar tecnologías (por ejemplo, cambiar PostgreSQL por otro motor, o Auth0 por Keycloak) sin alterar la lógica central.  
En *DulceAdmin*, Clean Architecture asegura un diseño mantenible, fácilmente testeable y con alta capacidad de adaptación a nuevos entornos.

---

### 7.2.3 Estilo Arquitectónico 3

#### 7.2.3.1 Nombre  
**Modelo Vista Controlador (MVC)**

#### 7.2.3.2 Problema  
Cuando la lógica de negocio y la presentación se encuentran mezcladas, la complejidad del código aumenta y se dificulta el mantenimiento, especialmente al manejar interfaces gráficas dinámicas y flujos de datos bidireccionales.

#### 7.2.3.3 Solución / Motivación  
El **patrón MVC** separa la aplicación en tres componentes principales:
- **Modelo:** gestiona los datos y reglas de negocio.  
- **Vista:** se encarga de la presentación e interacción con el usuario.  
- **Controlador:** actúa como intermediario entre la vista y el modelo.  

En *DulceAdmin*, este patrón se implementa de forma natural:
- El **Frontend (Vue.js)** gestiona la *vista* y los *controladores de interfaz*.  
- El **Backend (Spring Boot)** actúa como controlador y proveedor del *modelo de negocio*.  

Esta organización permite desarrollar, probar y mantener cada parte del sistema de forma independiente, garantizando claridad en los flujos de interacción y coherencia entre capas.

---

### 7.2.4 Estilo Arquitectónico 4

#### 7.2.4.1 Nombre  
**Arquitectura Orientada a Servicios (SOA / RESTful)**

#### 7.2.4.2 Problema  
Los sistemas monolíticos tradicionales presentan dificultades para integrarse con otros servicios, compartir información o evolucionar hacia entornos distribuidos.  
Esto genera dependencia tecnológica y baja interoperabilidad entre aplicaciones.

#### 7.2.4.3 Solución / Motivación  
La **arquitectura orientada a servicios (SOA)** y su derivación moderna **RESTful** permiten que los módulos del sistema se comuniquen a través de **servicios independientes** y **protocolos estándar (HTTP/HTTPS)**.  
Cada servicio ofrece una funcionalidad bien definida y accesible mediante API, lo que posibilita:
- Interoperabilidad entre sistemas heterogéneos.  
- Escalabilidad horizontal.  
- Despliegue distribuido e independiente.  

En *DulceAdmin*, el backend expone sus servicios a través de una **API REST**, consumida por el frontend y por posibles integraciones futuras (como aplicaciones móviles o portales administrativos).  
Esto permite que el sistema evolucione progresivamente hacia una arquitectura modular o basada en microservicios si el negocio lo requiere.

---

### 7.2.5 Estilo Arquitectónico 5

#### 7.2.5.1 Nombre  
**Arquitectura Basada en Contenedores (Container-Based Architecture)**

#### 7.2.5.2 Problema  
El despliegue manual y la configuración inconsistente entre entornos (desarrollo, pruebas y producción) generan errores, tiempos muertos y dificultades de mantenimiento.

#### 7.2.5.3 Solución / Motivación  
La **arquitectura basada en contenedores** encapsula cada componente o servicio dentro de un entorno aislado y reproducible, garantizando coherencia y portabilidad.  
En *DulceAdmin*, se emplea **Docker** y **Kubernetes** para:
- Estandarizar los entornos de ejecución del backend y frontend.  
- Asegurar despliegues automáticos y escalables en plataformas como **Render** o **Cloudflare**.  
- Facilitar la integración continua (CI/CD) y la recuperación ante fallos.  

Gracias a este estilo, el sistema puede desplegarse en distintos entornos sin configuraciones manuales, manteniendo estabilidad y consistencia operativa.

[ir al inicio](/README.md).

[Ir al anterior](6.Arquitectura_Referencia_Solucion.md).

[8. Justificacion de la linea base](8.Justificacion_LineaBase.md).